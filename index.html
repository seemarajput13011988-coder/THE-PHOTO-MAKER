<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Free Formal Passport Photo</title>
    <link rel="icon" href="/favicon.ico"/>
    <style>
      :root{--bg:#0b1020;--card:#121a2e;--line:#233;--txt:#e8ecf1;--btn:#2f80ed}
      *{box-sizing:border-box}
      body{font-family:system-ui,Segoe UI,Arial,sans-serif;margin:0;background:var(--bg);color:var(--txt)}
      header{padding:16px 20px;border-bottom:1px solid var(--line)}
      main{max-width:1100px;margin:0 auto;padding:20px}
      .card{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:16px;margin-bottom:16px}
      .grid{display:grid;gap:16px}
      @media(min-width:900px){.grid{grid-template-columns:1fr 1fr}}
      button{background:var(--btn);border:none;color:#fff;padding:10px 14px;border-radius:10px;cursor:pointer}
      button:disabled{opacity:.5;cursor:not-allowed}
      input[type="color"]{height:40px;width:60px;border:none;background:transparent}
      .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
      .select,.text{padding:8px 10px;border-radius:8px;border:1px solid #2a3a5a;background:#0f1629;color:var(--txt)}
      canvas{max-width:100%;background:#fff;border-radius:8px}
      .warning{color:#ffd166}
      .footer{opacity:.7;text-align:center;margin-top:8px}
      #shirtGallery img,#tieGallery img{transition: border-color 0.3s ease;}
    </style>
  </head>
  <body>
    <header><h2>Free Formal Passport Photo (Client‑only)</h2></header>
    <main class="grid">
      <section class="card">
        <h3>1) Upload photo</h3>
        <p>Upload a clear front-facing photo; this app auto-crops to face + shoulders and can set a plain white background.</p>
        <div class="row">
          <input id="file" type="file" accept="image/*"/>
          <select id="preset" class="select" title="Output size">
            <option value="35x45">35×45 mm (India)</option>
            <option value="2x2">2×2 inch</option>
            <option value="51x51">51×51 mm</option>
          </select>
          <button id="autocropBtn" disabled>Auto-detect & Crop</button>
          <button id="bgBtn" disabled>Set Background White</button>
        </div>
        <p class="warning">Note: Many passport authorities forbid altering clothing; use Crop‑only when required.</p>
        <canvas id="stage" width="900" height="1200"></canvas>
      </section>

      <section class="card">
        <h3>2) Formal shirt & tie</h3>
        <p>Enable attire overlay for profile/ID-style outputs; choose collar and tie styles and colors.</p>
        <div class="row">
          <label><input id="enableAttire" type="checkbox"> Enable attire overlay</label>
        </div>
        <div class="row">
          <label>Shirt</label>
          <select id="shirtStyle" class="select">
            <option value="oxford">Oxford (spread)</option>
            <option value="point">Point collar</option>
            <option value="mandarin">Mandarin collar</option>
          </select>
          <label>Color</label>
          <input id="shirtColor" type="color" value="#ffffff"/>
        </div>
        <div id="shirtGallery" class="row" style="gap:10px; margin-top:8px;"></div>
        <div class="row" style="margin-top:16px;">
          <label>Tie</label>
          <select id="tieStyle" class="select">
            <option value="none">No tie</option>
            <option value="regular">Regular</option>
            <option value="slim">Slim</option>
            <option value="bow">Bow tie</option>
          </select>
          <label>Color</label>
          <input id="tieColor" type="color" value="#0b2a6f"/>
        </div>
        <div id="tieGallery" class="row" style="gap:10px; margin-top:8px;"></div>
        <div class="row" style="margin-top:16px;">
          <button id="applyAttire" disabled>Apply/Update</button>
          <button id="clearAttire" disabled>Clear</button>
        </div>
        <h3>3) Export</h3>
        <div class="row">
          <button id="exportSingle" disabled>Download single (300 DPI)</button>
          <button id="exportSheet" disabled>Download 4×6 sheet</button>
        </div>
        <div class="footer"><small>Client‑side only. No uploads leave the browser.</small></div>
      </section>
    </main>
    <script type="module" src="/main.js"></script>
  </body>
</html>
